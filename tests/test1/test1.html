<!DOCTYPE html>
<html>
<head>
  <title>Class 10 - Online Test</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #2c3e50;
    }
    .question {
      margin: 20px 0;
    }
    .options label {
      display: block;
      margin-bottom: 8px;
      cursor: pointer;
    }
    button {
      padding: 10px 20px;
      background-color: #2ecc71;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background-color: #27ae60;
    }
    .login-box {
      text-align: center;
      padding: 40px;
    }
    input[type="text"], input[type="password"] {
      padding: 10px;
      width: 80%;
      margin: 10px auto;
      border-radius: 5px;
      border: 1px solid #ccc;
      display: block;
    }
    .result {
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container" id="app">
    <div class="login-box" id="loginBox">
      <h2>Class 10 CS - Test Login</h2>
      <input type="text" id="username" placeholder="Enter First Name">
      <input type="password" id="password" placeholder="Enter Password">
      <button onclick="login()">Login</button>
      <p id="loginError" style="color: red;"></p>
    </div>

    <div id="quizBox" style="display: none;">
      <h2>Welcome, <span id="studentName"></span></h2>
      <form id="quizForm"></form>
      <button onclick="submitQuiz()">Submit</button>
      <div class="result" id="resultBox"></div>
    </div>
  </div>

  <script>
    let currentStudent = null;
    let questions = [];

    function login() {
      const name = document.getElementById("username").value.trim().toLowerCase();
      const password = document.getElementById("password").value.trim();

      fetch('students.json')
        .then(res => res.json())
        .then(data => {
          const student = data.find(s => s.name.toLowerCase() === name && s.password === password);
          if (student) {
            currentStudent = student;
            document.getElementById("loginBox").style.display = "none";
            document.getElementById("quizBox").style.display = "block";
            document.getElementById("studentName").innerText = student.name;
            loadQuestions();
          } else {
            document.getElementById("loginError").innerText = "Invalid username or password!";
          }
        })
        .catch(err => {
          console.error("Error loading student data:", err);
        });
    }

    function loadQuestions() {
      fetch('questions.json')
        .then(res => res.json())
        .then(data => {
          questions = data;
          const quizForm = document.getElementById("quizForm");
          quizForm.innerHTML = '';
          questions.forEach((q, i) => {
            const div = document.createElement("div");
            div.className = "question";
            div.innerHTML = `<p><strong>Q${i + 1}. ${q.question}</strong></p>`;
            q.options.forEach(opt => {
              div.innerHTML += `
                <div class="options">
                  <label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>
                </div>`;
            });
            quizForm.appendChild(div);
          });
        });
    }

    function submitQuiz() {
      let score = 0;
      let correct = 0;
      let incorrect = 0;
      questions.forEach((q, i) => {
        const answer = document.querySelector(`input[name="q${i}"]:checked`);
        if (answer && answer.value === q.answer) {
          score++;
          correct++;
        } else {
          incorrect++;
        }
      });

      document.getElementById("resultBox").innerHTML = `
        <h3>âœ… Test Submitted</h3>
        <p>Total Questions: ${questions.length}</p>
        <p>Correct Answers: <strong>${correct}</strong></p>
        <p>Incorrect Answers: <strong>${incorrect}</strong></p>
        <p>Total Marks: <strong>${score}/${questions.length}</strong></p>
      `;
    }
  </script>
</body>
</html>
